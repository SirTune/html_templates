function loadWebpage(){layout=new webLayout,layout.stateSelect("Setup"),visibleClass("desk","block"),visibleClass("tableDice","none"),visibleClass("result","block"),visibleClass("endGame","none"),visibleClass("hide","none"),document.getElementById("footerTime").innerHTML="Last Modified: "+document.lastModified,layout.resTable.innerHTML=layout.resTableHead}function webLayout(){this.diceError=document.getElementById("diceError"),this.roundNo=document.getElementById("roundNo"),this.resDesc=document.getElementById("roundDesc"),this.imageDice=document.getElementById("diceImg"),this.resTable=document.getElementById("resultTable"),this.rollBtn=document.getElementById("rollBtn"),this.resTableHead="<thead><tr><th>Round No.</th><th>Dice Roll</th><th>Round Score</th><th>Total Score</th></tr></thead>",this.stateSelect=function(e){"Setup"==e?(visibleClass("setup","block"),visibleClass("gamePlay","none"),visibleClass("newRound","none"),visibleClass("confEnd","none")):"Roll"==e?(visibleClass("setup","none"),visibleClass("gamePlay","block"),visibleClass("newRound","none"),visibleClass("confEnd","none")):"New Round"==e?(visibleClass("setup","none"),visibleClass("gamePlay","block"),visibleClass("newRound","block"),document.getElementById("rollBtn").style.display="none",visibleClass("confEnd","none")):"Conf End"==e&&(visibleClass("confEnd","block"),visibleClass("setup","none"),visibleClass("gamePlay","none"),visibleClass("newRound","none"))}}function visibleClass(e,i){for(var n=document.getElementsByClassName(e),t=0;t<n.length;t++)n[t].style.display=i}function diceSetup(){function e(e){return 3>e?(layout.diceError.innerHTML="Input under limit",!1):e>6?(layout.diceError.innerHTML="Input over limit",!1):e%1!=0?(layout.diceError.innerHTML="Invalid input",!1):(layout.diceError.innerHTML="",!0)}if(0!=e(Number(document.getElementById("diceNo").value)))for(game={roundNo:0,score:{total:0,round:0},result:0,resSame:1,resMin1:2,resStrt:3,resDiff:4,resNone:5},dice={diceNo:Number(document.getElementById("diceNo").value),faces:6,diceArr:[],sumDice:function(){for(sum=0,i=0;i<this.diceArr.length;i++)sum+=parseInt(this.diceArr[i]);return Number(sum)},rollStr:function(){var e="";for(i=0;i<this.diceArr.length;i++)e+=this.diceArr[i],i!=this.diceArr.length-1&&(e+=", ");return e}},layout.resTable.innerHTML=layout.resTableHead,layout.stateSelect("Roll"),visibleClass("tableDice","block"),visibleClass("endGame","none"),roundStart(),layout.imageDice.innerHTML="",iDice=0;iDice<dice.diceNo;iDice++)diceImage(1)}function roundStart(){++game.roundNo,layout.roundNo.innerHTML="Round "+game.roundNo,layout.stateSelect("Roll"),visibleClass("tableDice","block"),visibleClass("endGame","none"),layout.resDesc.innerHTML="Please select 'Roll' to begin",layout.rollBtn.disabled=!1}function dicePlay(){layout.rollBtn.disabled=!0,rollDice(dice.diceNo,dice.diceArr),dice.diceArr.sort(),game.score.round=diceScore(dice.diceArr),game.score.total+=game.score.round,printResults()}function rollDice(e,n){function t(){var e=1+Math.random()*dice.faces;return parseInt(e)}for(layout.resDesc.innerHTML="Rolling...",iDice=0;e>iDice;iDice++)n[iDice]=t();var o=100;const l=10,s=1.3;for(time=o*Math.pow(s,9),layout.imageDice.innerHTML="",i=1;l>i;i++)setTimeout(function(){for(layout.imageDice.innerHTML="",iDice=0;e>iDice;iDice++)diceImage(t(),parseInt(90*Math.random()))},o),o*=s;arrayCopy=n.slice(),setTimeout(function(){for(layout.imageDice.innerHTML="",iDice=0;e>iDice;iDice++)diceImage(arrayCopy[iDice])},time)}function diceImage(e,i){(null==i||void 0==i)&&(i=0),layout.imageDice.innerHTML+="<img class='dice' src=\"Dice"+e+'.png" title="'+e+'" alt="'+e+'" style="transform:rotate('+String(i)+'deg)">'}function printResults(){setTimeout(function(){switch((game.roundNo-1)%10==0&&(layout.resTable.innerHTML=layout.resTableHead),layout.resTable.innerHTML+="<tr><td class='resRound'>"+game.roundNo+"</td ><td >"+dice.rollStr()+"</td ><td >"+game.score.round+"</td ><td class='resTotal'>"+game.score.total+"</td ></tr >",layout.resDesc.innerHTML="You rolled "+dice.rollStr()+" - ",game.result){case game.resSame:layout.resDesc.innerHTML+=dice.diceNo+" of a kind, score:"+game.score.round;break;case game.resMin1:layout.resDesc.innerHTML+=dice.diceNo-1+" of a kind, score:"+game.score.round;break;case game.resStrt:layout.resDesc.innerHTML+="Straight, score:"+game.score.round;break;case game.resDiff:layout.resDesc.innerHTML+="Diferent Values, score:"+game.score.round;break;case game.resNone:layout.resDesc.innerHTML+="Unlucky, Try again.";break;default:layout.resDesc.innerHTML="something went wrong"}layout.rollBtn.style.display="none",layout.stateSelect("New Round"),visibleClass("tableDice","block"),visibleClass("endGame","none")},time)}function diceScore(e){var n=0,t=0,o=0;for(i=0;i<e.length-1;i++)e[i]==e[i+1]?(n++,0==i&&(firstLink="A"),i==e.length-2&&(lastLink="A")):e[i]+1==e[i+1]?(t++,0==i&&(firstLink="B"),i==e.length-2&&(lastLink="B")):(o++,0==i&&(firstLink="C"),i==e.length-2&&(lastLink="C"));var l=dice.diceNo,s=dice.sumDice();return l-1==n?(game.result=game.resSame,60+s):l-2!=n||"A"==firstLink&&"A"==lastLink?l-1==t?(game.result=game.resStrt,20+s):0==n&&o>=1?(game.result=game.resDiff,s):(game.result=game.resNone,0):(game.result=game.resMin1,40+s)}function confEnd(){layout.stateSelect("Conf End")}function gameEndNo(){layout.stateSelect("New Round")}function gameEndYes(){layout.stateSelect("Setup"),visibleClass("tableDice","none"),visibleClass("endGame","block"),document.getElementById("endRound").innerHTML="Total Rounds played: "+game.roundNo,document.getElementById("endTotal").innerHTML="Total Score: "+game.score.total;var e=parseFloat(game.score.total/game.roundNo);document.getElementById("endAverage").innerHTML="Average score per round: "+e.toFixed(2)}window.onload=loadWebpage;